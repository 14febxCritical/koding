module.exports = class ModelCursor

  {defineProperties} = Object

  constructor:(mongoCursor, type)->
    defineProperties @,
      mongoCursor :
        value     : mongoCursor
      type        :
        value     : type
  
  each:(callback)=>
    @nextModel (err, model)=>
      if err then callback err
      else
        callback null, model
        @each callback  if model?
  
  nextObject:(rest...)=>
    @mongoCursor.nextObject rest...
  
  nextModel:(callback)=>
    @nextObject (err, doc)=>
      if err
        callback err
      else
        callback null, if doc? then new @type doc