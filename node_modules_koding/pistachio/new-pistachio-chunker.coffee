pistachio =
  ///
  \{              # first { (begins symbol)
    (\w*)?        # optional custom html tagName
    (\#\w*)?      # optional id - #-prefixed
    ((?:\.\w*)*)  # optional class names - .-prefixed
    (\[           # optional [ begins the attributes
      (?:\b\w*\b) # the name of the attribute
      (?:\=       # optional assignment operator
        [\"|\']?  # optional quotes
        .*        # optional value
        [\"|\']?  # optional quotes
      )           # there can be manyt attributes
    \])*          # optionally close the attribute tags
    \{            # second { (begins expression)
      ([^{}]*)    # practically anything can go between the braces, except {}
    \}\s*         # closing } (ends expression)
  \}              # closing } (ends symbol)
  ///g

test = '''
{a.hover.blink[href="#"]{#(meta.createdAt)}}
'''



test.replace pistachio, -> console.log arguments
