Message = require './message'

module.exports = class Reply extends Message
  @setSchema Message.schema

  @getDefaultRole =-> 'reply'

  @fetchRelated = (targetId, callback)->
    {Relationship} = require 'jraphical'
    Relationship.one
      as         : @getDefaultRole()
      targetId   : targetId
    , (err, rel)->
      if not err and rel then rel.fetchSource callback
      else callback err, null