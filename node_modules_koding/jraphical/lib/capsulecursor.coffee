{ModelCursor} = require 'bongo'

module.exports = class CapsuleCursor extends ModelCursor

  nextModel:(callback)->
    @nextObject (err, doc)->
      if err
        callback err
      else
        callback null, if doc? then new @types[doc.type] doc