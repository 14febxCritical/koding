ServiceManager = require './ServiceManager.coffee'

module.exports = class CustomerService extends ServiceManager

  register:(customer,callback)->
    params =
      "username"        : customer.username
      "passwd"          : customer.password
      "name"            : customer.name
      "company"         : customer.company
      "address-line-1"  : customer.addressLine
      "city"            : customer.city
      "state"           : customer.state
      "country"         : customer.country
      "zipcode"         : customer.zipcode
      "phone-cc"        : customer.phonecc
      "phone"           : customer.phone
      "lang-pref"       : "en"
    
    options = 
      "service"         : "customers"
      "action"          : "signup"
      "parameters"      : params 

    data = @makeRequestToResellerApi options, callback

  createCustomerContact:(contact,callback)->
    params =
      "name"            : customer.name
      "company"         : customer.company
      "address-line-1"  : customer.addressLine
      "city"            : customer.city
      "state"           : customer.state
      "country"         : customer.country
      "zipcode"         : customer.zipcode
      "phone-cc"        : customer.phonecc
      "phone"           : customer.phone
      "lang-pref"       : "en"
      "customer-id"     : contact.customerId
      "type"            : contact.type
    
    options = 
      "service"         : "customers"
      "action"          : "add"
      "parameters"      : params 

    data = @makeRequestToResellerApi options, callback

  getCustomerContact:(customer,callback)->
    params =
      "username"        : customer.username

    options = 
      "service"         : "customers"
      "action"          : "details"
      "parameters"      : params 

    data = @makeRequestToResellerApi options, callback

  getCustomerDefaultContactList:(customer,callback)->
    params =
      "username"        : customer.username
      "customer-id"     : customer.customerId
      "type"            : "Contact"

    options = 
      "service"         : "customers"
      "action"          : "default"
      "parameters"      : params 

    data = @makeRequestToResellerApi options, callback

  getCustomerContactList:(customer,callback)->
    params =
      "username"        : customer.username
      "customer-id"     : customer.customerId
      "no-of-records"   : 100 
      "page-no"         : 1
    
    options = 
      "service"         : "customers"
      "action"          : "search"
      "parameters"      : params 

    data = @makeRequestToResellerApi options, callback

  updateCustomerContact:(contact,callback)->
    params =
      "contact-id"      : contact.id
      "name"            : contact.name
      "company"         : contact.company
      "email"           : contact.email
      "address-line-1"  : contact.address
      "city"            : contact.city
      "country"         : contact.country
      "zipcode"         : contact.zipcode
      "phone-cc"        : contact.phonecc
      "phone"           : contact.phone
    
    options = 
      "service"         : "customers"
      "action"          : "modify"
      "parameters"      : params 

    data = @makeRequestToResellerApi options, callback

