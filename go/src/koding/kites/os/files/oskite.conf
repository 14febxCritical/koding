# Ubuntu upstart file at /etc/init/oskite.conf
# After putting it into /etc/init do the following for initialization:
#
#   initctl reload-configuration
#   initctl list
#
# you should see oskite in the list, if not you upstart script is wrong. After that start it:
#
#   start oskite
#
# log is stored into local syslog and /var/log/oskite.log

description     "koding oskite"

start on (local-filesystems and net-device-up IFACE!=lo)
stop on runlevel [!2345]

exec cd /opt/koding;./go/bin/os -c {{.Profile}} -r {{.Region}} >> /var/log/oskite.log

respawn
respawn limit 3 10

# give up if I respawn 3 times in 60 seconds...