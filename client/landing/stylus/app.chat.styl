@import "./client/Framework/themes/default/kdfn"
@import "./client/stylus/appfn"

@css {
/*
IRC CHAT stylesheet
app.chat.styl
*/
}

chatTextColor = #000

.chat-input
  .layer
  &.presentation
    b
      &.highlight-tag
        bg                color, rgba(255,255,0,.15) !important
        border            1px solid rgba(54, 54, 10,.35)
        border-radius     2px

      &.highlight-user
        bg                color, rgba(255,0,0,.15)   !important
        border            1px solid rgba(255,0,0,.35)
        border-radius     2px

.main-chat-handler

  top                     27px
  right                   -88px
  z-index                 4
  size                    88px, 18px
  cursor                  pointer
  font-size               12px

  opacity                 .4
  padding-top             5px
  padding-left            24px

  color                   white
  vendor                  transition, right .3s ease\, opacity .3s ease

  abs()

  &:hover
    right                 0
    opacity               .7

  cite
    top                   2px
    left                  2px
    size                  20px, 20px
    cursor                pointer
    bg                    position, -180px -620px
    sprite()
    abs()

  &.visible
    opacity               1

.main-chat-panel
  top                     51px
  z-index                 102
  right                   -260px
  background              white
  width                   250px
  vendor                  transition, right .4s\, opacity .3s
  box-shadow              0 0 16px rgba(0,0,0,.2)
  height                  calc(100% \- 50px)
  overflow-y              scroll
  opacity                 0
  abs()

  &.visible
    right                 0
    opacity               1

    &.inbox-mode
      vendor              transition, none

  .main-chat-header
    height               77px

  .chat-header
    height                auto
    padding               17px
    border-bottom         1px solid #eee
    font-weight           bold

  .view-changer
  .panel-pinner
  .conversation-starter
    right                 14px
    size                  22px, 22px
    top                   28px
    border-radius         30px
    padding               0 0 0 4px
    abs()

  .panel-pinner
  .view-changer
    padding               0 !important

  .panel-pinner
    left                  4px
    z-index               4
    background            none
    border                none

ul.chat-list
  margin                  0
  padding                 0
  border-right            1px solid #eee
  width                   250px !important
  height                  100%

  div.chat-item
    width                 215px
    margin-bottom         8px
    span
      color               #333

    &.multiple
      div.right-overflow
        margin-top        2px

  li.person
    padding               7px
    padding-bottom        0px
    height                auto
    background-color      white
    font-size             82%
    borderBox()
    border-bottom         1px solid #eee !important

    &.unread
      background          rgba(250, 239, 223, .5)
      border-left         3px solid #ff9200

    button.conversation-menu
      // display             none
      right               14px
      top                 13px
      width               22px !important
      height              22px
      border-radius       40px !important
      padding             0px 3px 0px 4px !important
      abs()

    div.avatar-wrapper
      padding             1px
      margin-right        11px
      size                30px,30px

    a.avatarview
      size                30px,30px
      border-radius       40px
      vendor              transition, border-radius .2s
      &:hover
        border-radius     4px

    div.right-overflow
      cursor              pointer
      margin-top          9px
      p
        color             #393939
        font-size         11px
        a.profile
          color           linkColor1
          font-weight     600
      footer
        margin-top        2px
        font-size         11px
        color             #888
        a
          color           #888
          font-size       11px
          margin-bottom   2px
          line-height     1.5em
          noTextDeco()
        time
          display         block

    &.ondrag
      z-index             9999
      background-color    white !important
      box-shadow          0 0 10px #000 !important
      div.move-handle
        display           block

    div.move-handle
      size                22px, 22px
      background-color    orange
      right               4px
      top                 4px
      display             none
      abs()

    div.inline-conversation-widget
      background-color    rgba(0,0,0,0.04)
      height              0px
      vendor              transition, height .2s ease-in
      border-top          1px solid transparent

      .kdscrollview
        max-height        217px
        min-height        217px

      &.ready
        height            240px
        border-top        1px solid #e0e0df
        margin-bottom     7px

      input
        left              0
        right             0
        bottom            0
        border-radius     0
        box-shadow        none
        width             100%
        abs()

    h3
      color               linkColor1
      font-size           11px
      margin-bottom       2px

    &:hover
      // bg                  color,rgba(255,255,255,.65)
      // shadow              0 0 4px 0 rgba(0,0,0,.17)
      // button.conversation-menu
      //   display           block
      .delete-link
        opacity           .5
        &:hover
          opacity         1

    &.active
      bg                  color,white
      shadow              0 0 10px 0 rgba(0,0,0,.17)

    .delete-link
      display             block
      size                20px, 20px
      abs()
      top                 5px
      right               5px
      bg                  position, -80px -520px
      opacity             0
      vendor              transition, opacity .15s linear
      sprite()

ul.chat-conversation
  padding                 4px

  li.message
    padding               4px
    border                1px solid rgba(0,0,0,0.03)
    width                 217px
    background-color      rgba(246, 162, 32, 0.2)
    border-radius         2px
    margin-bottom         4px

    &.mine
      text-align          right
      background-color    rgba(78, 171, 238, 0.1)

    &:last-child
      border-bottom       1px solid rgba(0,0,0,0.03) !important

.conversation-starter-popup
  padding                 2px 2px 2px 6px

  div.completed-items
    padding               5px 4px 5px 4px
    margin-left           -6px
    margin-top            6px
    margin-bottom         6px
    background-color      rgba(236, 244, 249, 0.6)
    border-top            1px solid rgba(67, 155, 219, 0.2)
    border-bottom         1px solid rgba(67, 155, 219, 0.2)

    .kdautocompletedlistitem
      margin              2px 0 0 2px
      padding             3px 14px 0 3px
      line-height         16px
      height              19px

      .profile
        padding-left      4px

  button.create-conversation
    height                21px
    padding-top           3px
    margin-right          13px
    left                  17px