<!DOCTYPE html>

<html>
<head>
  <title>AppController.coffee</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <link rel="stylesheet" media="all" href="../resources/base.css" />
  <link rel="stylesheet" media="all" href="../resources/module.css" />
</head>
<body>
  <header>
    <h1>AppController.coffee</h1>
  </header>
  <div id="content">
    <div id="sidebar">
      
      <h4>Classes</h4>
      <ul class="classlist">
        
        <li><a href="#AppController">AppController</a></li>
        
        <li><a href="#TabHandleView">TabHandleView</a></li>
        
      </ul>
      
      
    </div>
    <div id="main">
      
      <div id="module_docstring">
        <h2>Main Application controller class</h2>
      </div>
      
      
      <div id="classes">
        <h2>Classes</h2>
        
        <div class="class">
          <div class="header">
            <a id="AppController"><h3>AppController</h3></a>
            
            
            <a class="parent" href="#KDViewController"><h3>extends KDViewController</h3></a>
            
            
          </div>
          <div class="class_content">
            <h2>Main Application controller class</h2>
            <div class="methods">
              
              
              <div class="instancemethods">
                <h3>Instance Methods</h3>
                
                <div class="method">
                  <h4>constructor()</h4>
                  <p>The application controller will be instantiated when the module is loaded, before the methods are exposed to the ApplicationManager.  </p>

<p>For a single-window application, you can instantiate the main application view here, and set it as the controller's view.</p>

<p>To do this, either pass an options object with the view property to super:</p>

<pre><code>options = view : new AppMainView  
</code></pre>

<p>or call this after super:</p>

<pre><code>@setView new AppMainView  
</code></pre>

<p>For a single window application, you should register a listener on the mainView for the 'ViewClosed' event:</p>

<pre><code>mainView.registerListener KDEventTypes:'ViewClosed', listener:@, callback:@_closeView  
</code></pre>
                </div>
                
                <div class="method">
                  <h4>initApplication(callback)</h4>
                  <p>Application initialization code</p>

<p>This is called by the ApplicationManager when it wants the application to initialize.
When the application is finished initializing, fire the callback and propagate the event 'ApplicationInitialized'.
This is where we can apply a style sheet for this application:</p>

<pre><code>@_applyStyleSheet ()=&gt;  
  callback?()  
  @propagateEvent  
    KDEventType : 'ApplicationInitialized', globalEvent : yes
</code></pre>
                </div>
                
                <div class="method">
                  <h4>bringToFront()</h4>
                  <p>This is called by the ApplicationManager when it wants the applicatin to show it's window</p>

<p>This is not called in the case of an application having a plugin, and that plugin being called, or in the case of view-less applications</p>

<p>After doing whatever preparation is necessary the application should propagate the 'ApplicationWantsToBeShown' event, passing an object with options and data properties as follows:</p>

<pre><code>options :
  name : 'Application Name'
  type : 'application'
  &lt;tabHandleView&gt; : new TabHandleView
  hiddenHandle : yes/no (whether the application has a visible tab handle)
data    :
  application view to be shown by the ApplicationManager
</code></pre>

<p>Example:</p>

<pre><code>@propagateEvent (KDEventType : 'ApplicationWantsToBeShown', globalEvent : yes),
  options :
    name : 'Application Name'
    type : 'application'
    tabHandleView : new TabHandleView()
    hiddenHandle:no
  data : @getView()
</code></pre>
                </div>
                
                <div class="method">
                  <h4>initAndBringToFront()</h4>
                  <p>Called when the application wants to bringToFront an application that hasn't yet been initialized. Default contents:</p>

<pre><code>@initApplication =&gt;
  @bringToFront()
</code></pre>
                </div>
                
                <div class="method">
                  <h4>_doesOpenDocumentsExist()</h4>
                  
                </div>
                
                <div class="method">
                  <h4>_getOpenDocuments()</h4>
                  
                </div>
                
                <div class="method">
                  <h4>_getFrontDocument()</h4>
                  
                </div>
                
                <div class="method">
                  <h4>_addOpenDocument(document)</h4>
                  
                </div>
                
                <div class="method">
                  <h4>_removeOpenDocument(document)</h4>
                  
                </div>
                
                <div class="method">
                  <h4>_createNewDocument()</h4>
                  
                </div>
                
                <div class="method">
                  <h4>_closeDocument(document)</h4>
                  
                </div>
                
                <div class="method">
                  <h4>newFile()</h4>
                  
                </div>
                
                <div class="method">
                  <h4>openFile(file, options)</h4>
                  
                </div>
                
                <div class="method">
                  <h4>_applyStyleSheet(callback)</h4>
                  <p>This is an example of applying your own styles to the application:</p>

<pre><code>requirejs ["text!KDApplications/Shell.kdapplication/app.css?#{KD.version}"], (css)-&gt;
  $("&lt;style type='text/css'&gt;#{css}&lt;/style&gt;").appendTo("head");
  callback?()
</code></pre>
                </div>
                
                <div class="method">
                  <h4>_loadDocumentView(documentView)</h4>
                  
                </div>
                
              </div>
              
            </div>
          </div>
        </div>
        
        <div class="class">
          <div class="header">
            <a id="TabHandleView"><h3>TabHandleView</h3></a>
            
            
            <a class="parent" href="#KDView"><h3>extends KDView</h3></a>
            
            
          </div>
          <div class="class_content">
            <h2>TabHandleView (optional)</h2>

<p>You can optionally pass an instance of this class with the options of the "ApplicationWantsToBeShown" event</p>
            <div class="methods">
              
              
              <div class="instancemethods">
                <h3>Instance Methods</h3>
                
                <div class="method">
                  <h4>setDomElement()</h4>
                  <p>Example of customizing the tab view</p>
                </div>
                
              </div>
              
            </div>
          </div>
        </div>
        
      </div>
      
      
    </div>
  </div>
</body>
</html>
